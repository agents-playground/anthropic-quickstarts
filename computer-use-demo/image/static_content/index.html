<!doctype html>
<html>
    <head>
        <title>Computer Use Demo</title>
        <meta name="permissions-policy" content="fullscreen=*" />
        <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
            .container {
                display: flex;
                height: 100vh;
                width: 100vw;
            }
            .left {
                flex: 1;
                border: none;
                height: 100vh;
            }
            .right {
                flex: 2;
                border: none;
                height: 100vh;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <script>
                var baseAddress = window.location.protocol + '//' + window.location.hostname + ':8501';
                document.write('<iframe src="' + baseAddress + '" class="left" allow="fullscreen"></iframe>');
            </script>
            <script>
                var baseAddress = window.location.protocol + '//' + window.location.hostname + ':6080';
                document.write('<iframe id="vnc" src="' + baseAddress + '/vnc.html?&resize=scale&autoconnect=1&view_only=1&reconnect=1&reconnect_delay=2000" class="right" allow="fullscreen"></iframe>');
            </script>
            <button
                id="toggleViewOnly"
                style="position: absolute; top: 10px; right: 10px; z-index: 1000"
            >
                Toggle Screen Control (Off)
            </button>
            <script>
                document
                    .getElementById("toggleViewOnly")
                    .addEventListener("click", function () {
                        var vncIframe = document.getElementById("vnc");
                        var button = document.getElementById("toggleViewOnly");
                        var currentSrc = vncIframe.src;
                        if (currentSrc.includes("view_only=1")) {
                            vncIframe.src = currentSrc.replace(
                                "view_only=1",
                                "view_only=0",
                            );
                            button.innerText = "Toggle Screen Control (On)";
                        } else {
                            vncIframe.src = currentSrc.replace(
                                "view_only=0",
                                "view_only=1",
                            );
                            button.innerText = "Toggle Screen Control (Off)";
                        }
                    });
            </script>
        </div>
    </body>
</html>
